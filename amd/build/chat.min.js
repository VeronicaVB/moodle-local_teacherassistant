define("local_teacherassistant/chat",["exports","core/templates","core/ajax","core/notification"],function(_exports,_templates,_ajax,_notification){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}
/**
   * Full page chat functionality for Teacher Assistant.
   *
   * @module     local_teacherassistant/chat
   * @copyright  2025 Your Name
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=_interopRequireDefault(_templates),_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification);class ChatManager{constructor(courseId){this.courseId=courseId}async init(){await this.render(),this.attachEventHandlers()}async render(){console.log("Rendering chat interface...");try{const context={courseid:this.courseId},html=await _templates.default.render("local_teacherassistant/chat_fullpage",context),container=document.getElementById("teacherassistant-chat-container");container&&(container.innerHTML=html)}catch(error){_notification.default.exception(error)}}attachEventHandlers(){const sendBtn=document.getElementById("teacherassistant-fullpage-send-btn"),input=document.getElementById("teacherassistant-fullpage-input");sendBtn&&sendBtn.addEventListener("click",()=>this.sendMessage()),input&&input.addEventListener("keydown",e=>{"Enter"!==e.key||e.ctrlKey||e.shiftKey||(e.preventDefault(),this.sendMessage())})}async sendMessage(){const input=document.getElementById("teacherassistant-fullpage-input"),message=null==input?void 0:input.value.trim();if(message){this.addMessage(message,"user"),input.value="",this.showLoading();try{const response=await _ajax.default.call([{methodname:"local_teacherassistant_send_message",args:{courseid:this.courseId,message:message}}])[0];this.hideLoading(),this.addMessage(response.message,"assistant")}catch(error){this.hideLoading(),_notification.default.exception(error)}}}addMessage(text,sender){const messagesContainer=document.getElementById("teacherassistant-fullpage-messages");if(!messagesContainer)return;const messageDiv=document.createElement("div");messageDiv.className=`teacherassistant-fullpage-message teacherassistant-fullpage-message-${sender}`;const contentDiv=document.createElement("div");contentDiv.className="teacherassistant-fullpage-message-content",contentDiv.textContent=text,messageDiv.appendChild(contentDiv),messagesContainer.appendChild(messageDiv),messagesContainer.scrollTop=messagesContainer.scrollHeight}showLoading(){const messagesContainer=document.getElementById("teacherassistant-fullpage-messages");if(!messagesContainer)return;const loadingDiv=document.createElement("div");loadingDiv.id="teacherassistant-fullpage-loading",loadingDiv.className="teacherassistant-fullpage-message teacherassistant-fullpage-message-assistant";const contentDiv=document.createElement("div");contentDiv.className="teacherassistant-fullpage-message-content",contentDiv.innerHTML='<i class="fa fa-spinner fa-spin"></i> Thinking...',loadingDiv.appendChild(contentDiv),messagesContainer.appendChild(loadingDiv),messagesContainer.scrollTop=messagesContainer.scrollHeight}hideLoading(){const loading=document.getElementById("teacherassistant-fullpage-loading");loading&&loading.remove()}}_exports.init=courseId=>{console.log("Initializing Teacher Assistant full page chat..."),console.log(`Course ID: ${courseId}`);const manager=new ChatManager(courseId);console.log("ChatManager instance created."),console.log(manager),manager.init()}});

//# sourceMappingURL=chat.min.js.map